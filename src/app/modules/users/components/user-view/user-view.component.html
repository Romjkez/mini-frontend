<div class="container" style="max-width: 800px">
  <div class="row my-5">
    <div class="col">
      <p-card>
        <div class="container d-flex justify-content-between align-items-center">
          <div>
            <h1 class="h2">Пользователь #{{user.id}}</h1>
            <p-chip [label]="user.role | userRole" [icon]="'pi pi-user'"></p-chip>
          </div>
          <p-badge
            pTooltip="Рейтинг пользователя, представляет собой % правильных ответов на вопросы во всех пройденных тестах"
            [value]="user.rating | userRating | defaultValue">
          </p-badge>
        </div>
        <mn-user-form [readonly]="true" [form]="form"></mn-user-form>
        <section class="container">
          <hr class="my-4">
          <h3>Статистика</h3>
          <div class="row">
            <div class="col-md-6">Завершено тестов: {{user.finishedTests}}</div>
            <div class="col-md-6">Прочитано статей: {{user.finishedArticles}}</div>
            <div class="col-md-6">Избранных статей: {{user.favoriteArticles}}</div>
          </div>
        </section>
        <section class="container">
          <hr class="my-4">
          <h3>Другое</h3>
          <div class="row">
            <div class="col-md-6">Дата создания: {{user.createdAt | date:'dd.MM.YYYY HH:mm'}}</div>
            <div class="col-md-6">Дата обновления: {{user.updatedAt | date:'dd.MM.YYYY HH:mm'}}</div>
            <div class="col-md-6">Приватный профиль: {{user.isPrivate | boolean}}</div>
            <div class="col-md-6">Дата блокировки: {{user.bannedAt | date:'dd.MM.YYYY HH:mm' | defaultValue}}</div>
          </div>
        </section>
      </p-card>
    </div>
    <div *ngIf="isMyProfile" class="col-auto">
      <button class="p-button-rounded p-button-info" type="button" pButton icon="pi pi-cog" title="Настройки"
              (click)="menu.toggle($event)"></button>
      <p-menu #menu [popup]="true" [model]="settingsItems"></p-menu>
    </div>
  </div>
</div>

<p-dialog header="Изменение пароля" [modal]="true" [(visible)]="changePasswordModalVisible">
  <mn-change-password-modal [userId]="user?.id"
                            (passwordChanged)="changePasswordModalVisible=false"></mn-change-password-modal>
</p-dialog>
